% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fn_bucket-policy.r
\name{set_uri_public}
\alias{set_uri_public}
\title{Make an S3 URI Publicly Accessible}
\usage{
set_uri_public(
  s3_uri,
  bucket = "digital-atlas",
  directory = TRUE,
  test = FALSE,
  s3_instance = NULL,
  getID = "AllowPublicGet",
  listID = "AllowPublicList"
)
}
\arguments{
\item{s3_uri}{character. string specifying the S3 URI to make public}

\item{bucket}{character. string specifying the bucket name (default: "digital-atlas")}

\item{directory}{logical. indicating if the URI should be treated as a directory by appending "/*" (default: TRUE)}

\item{test}{logical. indicating whether to run in test mode without applying changes (default: FALSE)}

\item{s3_instance}{Optional AWS S3 client instance. If NULL, a new instance is created using paws.storage::s3().}

\item{getID}{character. string specifying the policy statement ID for GET permissions (default: "AllowPublicGet")}

\item{listID}{character. string specifying the policy statement ID for LIST permissions (default: "AllowPublicList")}
}
\value{
The updated policy as a JSON string
}
\description{
Updates an AWS S3 bucket policy to make a specified URI publicly accessible.
The function adds the URI to both get and list permissions in the bucket policy.
Safety features prevent accidental public exposure of the entire bucket.
}
\details{
The function creates backups of the policy before and after making changes,
storing these in the .bucket_policy/ directory of the bucket.
}
\note{
This function requires both AllowPublicGet and AllowPublicList statements to
already exist in the bucket policy. It will not create these statements if they don't exist.
}
\examples{
\dontrun{
# Make a directory public
set_uri_public("s3://my-bucket/public-data/")

# Test without applying changes
set_uri_public("s3://my-bucket/public-data/", test = TRUE)

# Make a single file public
set_uri_public("s3://my-bucket/path/to/file.csv", directory = FALSE)
}

}
