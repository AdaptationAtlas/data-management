# Adaptation Atlas Hazards

## Key Hazard Datasets

### Hazard Monthly Summaries (Hazard mean month)

Monthly hazard tables are generated by `R/2.1_create_monthly_haz_tables.R` and
saved in the `hazard_timeseries_mean_month/` folder in Parquet format. These
datasets are created by aggregating gridded hazard data (e.g., rainfall,
temperature) to **admin1 units** using zonal statistics. Values are then
organized into monthly and seasonal groupings, anomalies are calculated against
historical baselines, and results are ensembled across multiple GCMs to provide
central estimates and inter-model spread. Long-term averages and Sen’s slope
trend estimates are also derived to capture climatological means and temporal
changes.

#### Output File Types

| Table Name Suffix                | Description                                                                                              | Example Filename                                                                   |
| -------------------------------- | -------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| _seasons.parquet                 | Monthly values (or seasonal sums) for each model, year, and scenario. Includes anomalies vs baseline.    | `haz_3months_adm_mean_2061-2080_anomaly-historic_seasons.parquet`                  |
| _ensemble_seasons.parquet        | Same as above but ensembled across GCMs. Includes inter-model stats (mean, min, max, SD).                | `haz_3months_adm_mean_2061-2080_anomaly-historic_ensemble_seasons.parquet`         |
| _ensemble.parquet                | Seasonal or annual values averaged over the entire time period. Represents long-term averages per GCM.   | `haz_3months_adm_mean_2061-2080_anomaly-historic_ensemble.parquet`                 |
| _trends.parquet                  | Sen’s slope trend results per GCM per location. Includes slope, intercept, p-value, confidence interval. | `haz_3months_adm_mean_2061-2080_anomaly-historic_trends.parquet`                   |
| _trends_ensemble.parquet         | Trend results averaged across GCMs.                                                                      | `haz_3months_adm_mean_2061-2080_anomaly-historic_trends_ensemble.parquet`          |
| _trends_ensemble_minimal.parquet | Filtered ensemble trend outputs for specific hazards and stats of interest.                              | `haz_3months_adm_mean_r2061-2080_anomaly-historic_trends_ensemble_minimal.parquet` |

#### Core Fields in All Tables

| Field Name    | Description                                                                    |
| ------------- | ------------------------------------------------------------------------------ |
| admin0_name   | Country name                                                                   |
| admin1_name   | First-level administrative unit                                                |
| scenario      | Emissions scenario (e.g., ssp245, ssp126)                                      |
| timeframe     | Future period label (e.g., 2021-2040, 2041-2060)                               |
| model         | Climate model name (e.g., MPI-ESM1-2-HR); omitted in ensemble tables           |
| hazard        | Hazard variable (e.g., PTOT, TAVG, HSH-max)                                    |
| season        | 3-month window or annual label (e.g., MAM,JFM, Annual)                         |
| baseline_name | Name of the baseline used for computing anomalies (e.g., 1995-2014, 1981-2024) |
| value         | Monthly or seasonal hazard statistic (mean/sum depending on hazard)            |
| anomaly       | Difference between value` and historical baseline average                      |

Additional fields in ensemble and trend tables include:

- mean, max, min, sd: Statistical summaries across GCMs
- value_slope, value_decade, value_diff, etc.: Trend metrics using Sen’s slope

#### Note

- Ensemble summaries are computed _after_ anomalies to preserve variance
  structure across models.

### Hazard X Exposure

Here’s a structured markdown draft for your **Hazard × Exposure** dataset,
reflecting the info you provided:

---

## Hazard × Exposure

This dataset quantifies **risk-weighted exposure** by combining climate hazard
frequency data with crop and livestock exposure indicators (e.g., harvested
area, production value, livestock numbers). It is a core product of the Africa
Agriculture Adaptation Atlas (AAAA) risk modeling pipeline and builds directly
on the exposure datasets described in earlier chapters.

### Overview

Hazard × Exposure outputs are generated by intersecting **hazard rasters** with
**exposure layers**. Two main types of outputs are produced:

- **`solo`** — Single hazard variables intersected with exposure layers.
- **`int`** — Multiple hazard interactions combined before intersection with
  exposure.

Each intersection is calculated for three **severity levels**: `moderate`,
`severe`, and `extreme`. Outputs include both **historic** periods and **future
ensemble projections** based on climate models, with separate calculations for
**annual totals** and **seasonal windows** (e.g., Jagermeyer seasons).

Hazard × Exposure layers are primarily stored as **Cloud-Optimized GeoTIFFs
(COGs)**, and supporting `.parquet` tables are provided for analysis at
subnational administrative levels (admin0–2).

### File Structure

`<temporal_resolution>/<crop_or_livestock>_<period>_<severity>_<hazard_code>_<type>_<exposure_metric>_<units>.tif`

### Key Notes

- Exposure data include **crop VoP (nominal USD & international dollars),
  harvested area (ha), and livestock numbers or VoP**.
- Hazard layers include **annual and seasonal frequencies** from climate
  projections or historical observations.

### Output Format

- **Raster COGs** for each hazard × exposure × severity × period combination.
- **Parquet tables** summarizing exposure by admin unit for integration into
  downstream analyses.

> Note: `int` outputs should be used when analyzing combined hazard
> interactions, whereas `solo` outputs are appropriate for single-hazard
> assessments. Severity level selection (`moderate`, `severe`, `extreme`) should
> match the risk appetite of the analysis.
