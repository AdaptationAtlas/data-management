(function(){var Y={},lr=function(c,n,l,u,y,d){if(x=d?c.toPrecision(n):c.toFixed(n),!/^-?[\d.]+$/.test(x))return x;var m=x.split(".");return m.length>2?x:(m[0]=m[0].replace(new RegExp("\\B(?=(\\d{"+l+"})+(?!\\d))","g"),u),m.join(y))};Y.formatCurrency=function(c,n,l,u,y,d,m,p){var _=parseFloat(c);if(isNaN(_))return"";if(p!==null&&_===0)return p;var v=lr(_,l,u,y,d);return v=m?/^-/.test(v)?"-"+n+v.replace(/^-/,""):n+v:v+n,v},Y.formatString=function(c,n,l){var u=c;return u===null?"":n+u+l},Y.formatPercentage=function(c,n,l,u,y,d){var m=parseFloat(c);return isNaN(m)?"":d!==null&&m===0?d:lr(m*100,n,l,u,y)+"%"},Y.formatRound=function(c,n,l,u,y,d){var m=parseFloat(c);return isNaN(m)?"":d!==null&&m===0?d:lr(m,n,l,u,y)},Y.formatSignif=function(c,n,l,u,y,d){var m=parseFloat(c);return isNaN(m)?"":d!==null&&m===0?d:lr(m,n,l,u,y,!0)},Y.formatDate=function(c,n,l){var u=c;return u===null?"":((n==="toDateString"||n==="toLocaleDateString")&&/^\d{4,}\D\d{2}\D\d{2}$/.test(u)?(u=u.split(/\D/),u=new Date(u[0],u[1]-1,u[2])):u=new Date(u),u[n].apply(u,l))},window.DTWidget=Y;var Xr=function(c,n){var l=$(c).find("input").first(),u=l.data("searchable");l.prop("disabled",!u||n.disabled);var y=c.getAttribute("data-type");if(["factor","logical"].includes(y)){var d=n.params.options.map(function(T){return{text:T,value:T}}),m=$(c).find(".selectized").eq(0)[0].selectize,p=m.getValue();m.clearOptions(),m.addOption(d),m.setValue(p)}else if(["number","integer","date","time"].includes(y)){var _=$(c).find(".noUi-target").eq(0),v=Math.pow(10,Math.max(0,+_.data("scale")||0)),d=[n.params.min*v,n.params.max*v],K=d.slice(),p=_.val().map(Number),V=_.noUiSlider("options").range;V=[V.min,V.max],p[0]!=V[0]&&(d[0]=Math.max(p[0],d[0])),p[1]!=V[1]&&(d[1]=Math.min(p[1],d[1])),_.noUiSlider({start:d,range:{min:K[0],max:K[1]}},!0)}},Z=function(c){return c.length===0?c:HTMLWidgets.transposeArray2D(c)},Fr=!1;function Zr(){Fr||(Fr=!0,$.fn.dataTable.ext.afnFiltering.push(function(c,n,l){var u=c.nTable.ctfilter;if(u&&!u[l])return!1;var y=c.nTable.ctselect;return!(y&&!y[l])}))}HTMLWidgets.widget({name:"datatables",type:"output",renderOnNullValue:!0,initialize:function(c,n,l){return $.valHooks.number={get:function(u){var y=parseFloat(u.value);return isNaN(y)?"":y}},$(c).html("&nbsp;"),{data:null,ctfilterHandle:new crosstalk.FilterHandle,ctfilterSubscription:null,ctselectHandle:new crosstalk.SelectionHandle,ctselectSubscription:null}},renderValue:function(c,n,l){if(c.offsetWidth===0||c.offsetHeight===0){l.data=n;return}l.data=null;var u=$(c);if(u.empty(),n===null){u.append("&nbsp;");for(var y in l.clearInputs)l.clearInputs[y]();l.clearInputs={};return}var d=n.crosstalkOptions;d||(d={key:null,group:null}),d.group&&(Zr(),l.ctfilterHandle.setGroup(d.group),l.ctselectHandle.setGroup(d.group)),window.HTMLWidgets.viewerMode&&(n.hasOwnProperty("fillContainer")||(n.fillContainer=!0),n.hasOwnProperty("autoHideNavigation")||(n.autoHideNavigation=!0)),l.fillContainer=n.fillContainer;var m=n.data;m instanceof Array&&(m=Z(m)),u.append(n.container);var p=u.find("table");n.class&&p.addClass(n.class),n.caption&&p.prepend(n.caption),n.selection||(n.selection={mode:"none",selected:null,target:"row",selectable:null}),HTMLWidgets.shinyMode&&n.selection.mode!=="none"&&n.selection.target==="row+column"&&p.children("tfoot").length===0&&(p.append($("<tfoot>")),p.find("thead tr").clone().appendTo(p.find("tfoot")));var _;switch(n.filter){case"top":p.children("thead").append(n.filterHTML),_=p.find("thead tr:last td");break;case"bottom":p.children("tfoot").length===0&&p.append($("<tfoot>")),p.children("tfoot").prepend(n.filterHTML),_=p.find("tfoot tr:first td");break}var v={searchDelay:1e3};m!==null&&$.extend(v,{data:m});var K=typeof $.fn.popover<"u";l.fillContainer&&(v.scrollX=!0,v.scrollY="100px",n.options.paging===!1&&(K&&(v.dom="<'row'<'col-sm-4'i><'col-sm-8'f>><'row'<'col-sm-12'tr>>"),v.fnInfoCallback=function(r,t,a,i,s,o){return Number(s).toLocaleString()+" records"})),n.autoHideNavigation===!0&&n.options.paging!==!1&&(m instanceof Array&&n.options.pageLength>=m.length?v.dom=K?"<'row'<'col-sm-12'tr>>":"t":K&&window.FlexDashboard&&window.FlexDashboard.isMobilePhone()&&(v.dom="<'row'<'col-sm-12'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>")),$.extend(!0,v,n.options||{});var V=v.searchCols;V&&(V=V.map(function(r){return r===null?"":r.search}),delete v.searchCols);var T=v.serverSide===!0,kr=[],R=[];T&&HTMLWidgets.shinyMode&&typeof v.ajax=="object"&&/^session\/[\da-z]+\/dataobj/.test(v.ajax.url)&&!v.ajax.dataSrc&&(v.ajax.dataSrc=function(r){kr=$.makeArray(r.DT_rows_all),R=$.makeArray(r.DT_rows_current);var t=r.data;if(!Lr())return t;var a=p.DataTable(),i=a.colReorder.order(),s=!0,o,M,w;for(o=0;o<i.length;++o)i[o]!==o&&(s=!1);if(s)return t;for(o=0;o<t.length;++o)for(w=t[o].slice(),M=0;M<i.length;++M)t[o][M]=w[i[M]];return t});var Kr=this;l.fillContainer&&p.on("init.dt",function(r){Kr.fillAvailableHeight(c,$(c).innerHeight())});var Lr=function(){return"colReorder"in v},e=p.DataTable(v);if(u.data("datatable",e),"rowGroup"in v&&e.on("column-reorder",function(r,t,a){var i=e.rowGroup().dataSrc(),s=a.mapping[i];e.rowGroup().dataSrc(s)}),l.ctfilterSubscription&&(l.ctfilterHandle.off("change",l.ctfilterSubscription),l.ctfilterSubscription=null),l.ctselectSubscription&&(l.ctselectHandle.off("change",l.ctselectSubscription),l.ctselectSubscription=null),!d.group)p[0].ctfilter=null,p[0].ctselect=null;else{let r=function(i){if(i){for(var s={},o=0;o<i.length;o++)s[i[o]]=!0;for(var M={},w=0;w<Ur.length;w++)s[Ur[w]]&&(M[w]=!0);return M}else return null},t=function(i){p[0].ctfilter=r(i.value),e.draw()},a=function(i){if(i.sender!==l.ctselectHandle&&(e.rows("."+g,{search:"applied"}).nodes().to$().removeClass(g),Wr&&b("rows_selected",Wr(),void 0,!0)),i.sender!==l.ctselectHandle&&i.value&&i.value.length){var s=r(i.value),o=crosstalk.var("plotlyCrosstalkOpts").get()||{};if(o.persistent===!0)var s=$.extend(s,p[0].ctselect);p[0].ctselect=s,e.draw()}else p[0].ctselect&&(p[0].ctselect=null,e.draw())};var lt=r,ft=t,ut=a,Ur=d.key;l.ctfilterSubscription=l.ctfilterHandle.on("change",t),t({value:l.ctfilterHandle.filteredKeys}),l.ctselectSubscription=l.ctselectHandle.on("change",a),a({value:l.ctselectHandle.value})}var S=function(r,t){return $.inArray(r,$.makeArray(t))>-1},_r=function(r,t){var a=!1,i=!0;return v.search&&(a=v.search.regex,i=v.search.caseInsensitive!==!1),e.colReorder&&(r=e.colReorder.transpose(r)),e.column(r).search(t,a,!a,i)};n.filter!=="none"&&(n.hasOwnProperty("filterSettings")||(n.filterSettings={}),_.each(function(r,t){var a=$(t),i=a.data("type"),s,o=a.children("div").first().children("input"),M=o.prop("disabled"),w=e.settings()[0].aoColumns[r].bSearchable;o.prop("disabled",!w||M),o.data("searchable",w),o.on("input blur",function(){o.next("span").toggle(!!o.val())}),o.next("span").css("pointer-events","auto").hide().click(function(){$(this).hide().prev("input").val("").trigger("input").focus()});var C;V&&V[r]&&(C=V[r],o.val(C).trigger("input"));var N=a.children("div").last(),B=$(c).find(".dataTables_scrollHead,.dataTables_scrollFoot"),ar=B.css("overflow"),X=$(c).find(".dataTables_scrollBody"),wr=X.css("overflow"),j=$(c).find(".dataTables_scroll"),I=j.css("overflow");if(ar==="hidden"&&(N.on("show hide",function(f){f.type==="show"?(B.css("overflow","visible"),X.css("overflow","visible"),j.css("overflow-x","scroll")):(B.css("overflow",ar),X.css("overflow",wr),j.css("overflow-x",I))}),N.css("z-index",25)),S(i,["factor","logical"])){o.on({click:function(){o.parent().hide(),N.show().trigger("show"),s[0].selectize.focus()},input:function(){var f=JSON.stringify(s[0].selectize.getValue()),h=o.val();f==="[]"&&(f=""),f!==h&&s[0].selectize.setValue(h===""?[]:JSON.parse(h))}});var J=N.children("select");s=J.selectize($.extend({options:J.data("options").map(function(f,h){return{text:f,value:f}}),plugins:["remove_button"],hideSelected:!0,onChange:function(f){if(f===null&&(f=[]),o.val(f.length?JSON.stringify(f):""),f.length&&o.trigger("input"),o.attr("title",o.val()),T){_r(r,f.length?JSON.stringify(f):"").draw();return}a.data("filter",f.length>0),e.draw()}},n.filterSettings.select)),s[0].selectize.on("blur",function(){N.hide().trigger("hide"),o.parent().show(),o.trigger("blur")}),s.next("div").css("margin-bottom","auto")}else if(i==="character"){var q=function(){_r(r,o.val()).draw()},G=$.fn.dataTable.util.throttle(q,v.searchDelay);o.on("input",function(f,h){h||!T?q():G()})}else if(S(i,["number","integer","date","time"])){var F=N;N=F.children("div").first(),F.css({"background-color":"#fff",border:"1px #ddd solid","border-radius":"4px",padding:n.vertical?"35px 20px":"20px 20px 10px 20px"});var rr=F.children("span").css({"margin-top":n.vertical?"0":"10px","white-space":"nowrap"}),tr=rr.first(),er=rr.last(),U=+N.data("min"),z=+N.data("max"),E=Math.pow(10,Math.max(0,+N.data("scale")||0));U=Math.round(U*E),z=Math.round(z*E);var br=function(f,h){if(h===1)return f;var A=Math.round(Math.log(h)/Math.log(10));return(f/h).toFixed(A)},yr=function(){return s.noUiSlider("options").range.min},$r=function(){return s.noUiSlider("options").range.max};o.on({focus:function(){F.show().trigger("show"),F.width(Math.max(160,tr.outerWidth()+er.outerWidth()+20)),(F.outerWidth()<o.outerWidth()||n.vertical)&&F.outerWidth(o.outerWidth()),$(window).width()<F.offset().left+F.width()&&F.offset({left:o.offset().left+o.outerWidth()-F.outerWidth()})},blur:function(){F.hide().trigger("hide")},input:function(){o.val()===""&&s.val([yr(),$r()])},change:function(){var f=o.val().replace(/\s/g,"");if(f!==""){if(f=f.split("..."),f.length!==2){o.parent().addClass("has-error");return}f[0]===""&&(f[0]=yr()),f[1]===""&&(f[1]=$r()),o.parent().removeClass("has-error");var h=function(A){var W=i==="date"?"T00:00:00Z":"",k=new Date(A+W).getTime();return i==="date"?k+36e5:k};S(i,["date","time"])&&(f[0]=h(f[0]),f[1]=h(f[1])),f[0]!=yr()&&(f[0]*=E),f[1]!=$r()&&(f[1]*=E),s.val(f)}}});var xr=function(f){if(f=br(f,E),i==="number")return f;if(i==="integer")return parseInt(f);var h=new Date(+f);if(i==="date"){var A=function(W){return("0"+W).substr(-2,2)};return h.getUTCFullYear()+"-"+A(1+h.getUTCMonth())+"-"+A(h.getUTCDate())}else return h.toISOString()},Hr=i==="date"?{step:60*60*1e3}:i==="integer"?{step:1}:{};Hr.orientation=n.vertical?"vertical":"horizontal",Hr.direction=n.vertical?"rtl":"ltr",s=N.noUiSlider($.extend({start:[U,z],range:{min:U,max:z},connect:!0},Hr,n.filterSettings.slider)),E>1&&function(){for(var f=U,h=z,A=s.val();A[0]>U||A[1]<z;)A[0]>U&&(f-=A[0]-U),A[1]<z&&(h+=z-A[1]),s=N.noUiSlider($.extend({start:[f,h],range:{min:f,max:h},connect:!0},Hr,n.filterSettings.slider),!0),A=s.val();U=f,z=h}();var Tr=n.options.columnDefs.find(function(f){return(f.targets===r||S(r,f.targets))&&"render"in f}),qr=function(f,h){if(Tr&&typeof Tr.render=="function"){var A=function(W){return W=br(W,E),S(i,["date","time"])?new Date(+W):W};tr.text(Tr.render(A(f),"display")),er.text(Tr.render(A(h),"display"))}else tr.text(xr(f)),er.text(xr(h))};qr(U,z);var Yr=function(f){var h=s.val();a.data("filter",h[0]>yr()||h[1]<$r());var A=xr(h[0]),W=xr(h[1]),k;if(a.data("filter")?(k=A+" ... "+W,o.attr("title",k).val(k).trigger("input")):o.attr("title","").val(""),qr(h[0],h[1]),f.type!=="slide"){if(T){_r(r,a.data("filter")?k:"").draw();return}e.draw()}};s.on({set:Yr,slide:Yr})}if(T){C&&o.trigger("input").trigger("change");return}var at=function(f,h,A){if(e.settings()[0]!==f||typeof s>"u"||!a.data("filter"))return!0;var W=s.val(),k,Sr,Mr,ot=function(Ir){if(!Lr())return Ir;var Qr=e.colReorder.order(),or;for(or=0;or<Qr.length;++or)if(Qr[or]===Ir)return or;return Ir};if(k=h[ot(r)],i==="number"||i==="integer"){if(k=parseFloat(k),isNaN(k))return!1;if(Sr=parseFloat(br(W[0],E)),Mr=parseFloat(br(W[1],E)),k>=Sr&&k<=Mr)return!0}else if(i==="date"||i==="time"){if(k=new Date(k),Sr=new Date(W[0]/E),Mr=new Date(W[1]/E),k>=Sr&&k<=Mr)return!0}else if(i==="factor"){if(W.length===0||S(k,W))return!0}else if(i==="logical"&&(W.length===0||S(k===""?"na":k,W)))return!0;return!1};$.fn.dataTable.ext.search.push(at),C&&o.trigger("input").trigger("change")}));var Vr=function(){var r=$(e.table().body());r.unhighlight(),e.rows({filter:"applied"}).data().length!==0&&(r.highlight($.trim(e.search()).split(/\s+/)),_&&_.each(function(t,a){var i=$(a),s=i.data("type");if(s==="character"){var o=i.children("div").first().children("input"),M=e.column(t).nodes().to$(),w=$.trim(o.val());s!=="character"||w===""||M.highlight(w.split(/\s+/))}}))};if(v.searchHighlight&&(e.on("draw.dt.dth column-visibility.dt.dth column-reorder.dt.dth",Vr).on("destroy",function(){e.off("draw.dt.dth column-visibility.dt.dth column-reorder.dt.dth")}),jQuery.fn.highlight.options.escapeRegex=!v.search||!v.search.regex,Vr()),typeof n.callback=="function"&&n.callback(e),n.editable&&e.on("dblclick.dt","tbody td",function(r){if(r.target===this){var t=[],a=!1;switch(n.editable.target){case"cell":t=[this],a=!0;break;case"row":t=e.cells(e.cell(this).index().row,"*").nodes();break;case"column":t=e.cells("*",e.cell(this).index().column).nodes();break;case"all":t=e.cells().nodes();break;default:throw'The editable parameter must be "cell", "row", "column", or "all"'}for(var i=n.editable.disable?n.editable.disable.columns:null,s=n.editable.numeric,o=n.editable.area,M=n.editable.date,w=0;w<t.length;w++)(function(C,N){var B=$(C),ar=B.html(),X=e.cell(C),wr=X.data(),j=X.index().column,I;S(j,s)?I=$('<input type="number">'):S(j,o)?I=$("<textarea></textarea>"):S(j,M)?I=$('<input type="date">'):I=$('<input type="text">'),a||(B.data("input",I).data("html",ar),I.attr("title","Hit Ctrl+Enter to finish editing, or Esc to cancel")),I.val(wr),S(j,i)&&I.attr("readonly","").css("filter","invert(25%)"),B.empty().append(I),C===N&&I.focus(),I.css("width","100%"),a&&I.on("blur",function(J){var q=I.val();q!==wr?(X.data(q),HTMLWidgets.shinyMode&&b("cell_edit",[Or(C)],"DT.cellInfo",null,{priority:"event"}),T||e.draw(!1)):B.html(ar)}).on("keyup",function(J){J.keyCode===27&&I.trigger("blur")}),a||I.on("keyup",function(J){var q=function(U,z){U.data("input").remove(),z&&U.html(U.data("html"))};if(J.keyCode===27)for(var G=0;G<t.length;G++)q($(t[G]),!0);else if(J.keyCode===13&&J.ctrlKey){for(var F,rr,tr,er=[],G=0;G<t.length;G++)F=t[G],rr=$(F),tr=e.cell(F),tr.data(rr.data("input").val()),HTMLWidgets.shinyMode&&er.push(Or(F)),q(rr,!1);HTMLWidgets.shinyMode&&b("cell_edit",er,"DT.cellInfo",null,{priority:"event"}),T||e.draw(!1)}})})(t[w],this)}}),!(!HTMLWidgets.shinyMode&&!d.group)){var D={},Ar={};D.updateCaption=function(r){r&&p.children("caption").replaceWith(r)},l.clearInputs={};var b=function(r,t,a,i,s){var o=r;if(r=c.id+"_"+r,a&&(r=r+":"+a),!(o!=="cell_edit"&&!/_clicked$/.test(o)&&Ar.hasOwnProperty(r)&&Ar[r]===JSON.stringify(t))&&(Ar[r]=JSON.stringify(t),HTMLWidgets.shinyMode&&Shiny.setInputValue&&(Shiny.setInputValue(r,t,s),l.clearInputs[r]||(l.clearInputs[r]=function(){Shiny.setInputValue(r,null)})),o==="rows_selected"&&!i&&d.group)){var M=d.key,w=null;if(t){w=[];for(var C=0;C<t.length;C++)w.push(M[t[C]-1])}l.ctselectHandle.set(w)}},zr=function(r){return r.map(function(t){return 1+t})},fr=function(r){var t=[];return $.each(r,function(a,i){$.inArray(i,t)===-1&&t.push(i)}),t},Dr=function(r){var t=r.index();return t===void 0?{row:null,col:null}:(T?t.row=R[t.row]:t.row+=1,{row:t.row,col:t.column})},rt=function(){b("rows_selected",[]),b("columns_selected",[]),b("cells_selected",Z([]),"shiny.matrix")};rt();var tt=e.settings()[0]._select!==void 0;if(n.selection.mode==="none"&&!T&&tt){var Er=function(){var r=e.rows({selected:!0}),t=[];$.each(r.indexes().toArray(),function(a,i){t.push(i+1)}),b("rows_selected",t)},Pr=function(){var r=e.columns({selected:!0});b("columns_selected",r.indexes().toArray())},Br=function(){var r=e.cells({selected:!0}),t=[];r.every(function(){var a=this.index().row,i=this.index().column;t=t.concat([[a+1,i]])}),b("cells_selected",Z(t),"shiny.matrix")};e.on("select deselect",function(r,t,a,i){Er(),Pr(),Br()}),Er(),Pr(),Br()}var Q=n.selection.mode,P=n.selection.target,Cr=n.selection.selectable===!1;if(S(Q,["single","multiple"])){var g=S(n.style,["bootstrap","bootstrap4"])?"active":"selected",ur=function(r){if(r===null||typeof r=="boolean"||P==="cell")return{rows:[],cols:[]};if(P==="row")return{rows:$.makeArray(r),cols:[]};if(P==="column")return{rows:[],cols:$.makeArray(r)};if(P==="row+column")return{rows:$.makeArray(r.rows),cols:$.makeArray(r.cols)}},sr=n.selection.selected,H=ur(sr).rows,O=ur(sr).cols,nr=n.selection.selectable,cr=ur(nr).rows,dr=ur(nr).cols,Jr=function(r,t){var a=T?kr:e.rows({search:"applied"}).indexes().toArray();if(r=a.indexOf(r),t=a.indexOf(t),r>t){var i=t;t=r,r=i}return a.slice(r,t+1)},Nr=function(r){return T?R[r]:r+1},vr;if(S(P,["row","row+column"])){var Wr=function(){var r=e.rows("."+g),t=r.indexes().toArray();return T?(t=t.map(function(a){return R[a]}),H=Q==="multiple"?fr(H.concat(t)):t,H):(H=zr(t),H)},et=function(){if(Cr){H=[];return}if(cr.length!==0){var r=cr[0]<=0;r?H=$(H).not(cr.map(function(t){return-t})).get():H=$(H).filter(cr).get()}},hr=function(r){if(r||et(),e.$("tr."+g).removeClass(g),H.length!==0)if(T)e.rows({page:"current"}).every(function(){S(R[this.index()],H)&&$(this.node()).addClass(g)});else{var t=H.map(function(a){return a-1});$(e.rows(t).nodes()).addClass(g)}};e.on("mousedown.dt","tbody tr",function(r){var t=$(this),a=e.row(this);if(Q==="multiple")if(r.shiftKey&&vr!==void 0){var i=!t.hasClass(g),s=Nr(a.index());if(T){var o=Jr(vr,s);o.map(function(w){var C=R.indexOf(w);if(C>=0){var N=e.row(C).nodes().to$(),B=!N.hasClass(g);i===B&&N.toggleClass(g)}}),i?H=fr(H.concat(o)):H=H.filter(function(w){return!S(w,o)})}else Jr(vr-1,s-1).map(function(w){var C=e.row(w).nodes().to$(),N=!C.hasClass(g);i===N&&C.toggleClass(g)});r.preventDefault()}else t.toggleClass(g);else t.hasClass(g)?t.removeClass(g):(e.$("tr."+g).removeClass(g),t.addClass(g));if(T&&!t.hasClass(g)){var M=R[a.index()];S(M,H)&&H.splice($.inArray(M,H),1)}Wr(),hr(!1),b("rows_selected",H),b("row_last_clicked",Nr(a.index()),null,null,{priority:"event"}),vr=Nr(a.index())}),hr(!1),b("rows_selected",H),T&&e.on("draw.dt",function(r){hr(!1)}),D.selectRows=function(r,t){H=$.makeArray(r),hr(t),b("rows_selected",H)}}if(S(P,["column","row+column"])){P==="row+column"&&$(e.columns().footer()).css("cursor","pointer");var nt=function(){if(Cr){O=[];return}if(dr.length!==0){var r=dr[0]<=0;r?O=$(O).not(dr.map(function(t){return-t})).get():O=$(O).filter(dr).get()}},pr=function(r){r||nt(),O=$(O).filter(e.columns().indexes()).get(),e.columns().nodes().flatten().to$().removeClass(g),O.length>0&&e.columns(O).nodes().flatten().to$().addClass(g)},Gr=function(){var r=P==="column"?e.cell(this).index().column:$.inArray(this,e.columns().footer()),t=$(e.column(r).nodes());r!==-1&&(t.hasClass(g)?(t.removeClass(g),O.splice($.inArray(r,O),1)):(Q==="single"&&$(e.cells().nodes()).removeClass(g),t.addClass(g),O=Q==="single"?[r]:fr(O.concat([r]))),pr(!1),b("columns_selected",O))};P==="column"?$(e.table().body()).on("click.dt","td",Gr):$(e.table().footer()).on("click.dt","tr th",Gr),pr(!1),b("columns_selected",O),T&&e.on("draw.dt",function(r){pr(!1)}),D.selectColumns=function(r,t){O=$.makeArray(r),pr(t),b("columns_selected",O)}}if(P==="cell"){var L=[],ir=[];sr!==null&&(L=sr),nr!==null&&typeof nr!="boolean"&&(ir=nr);var gr=function(r,t){for(var a=0;a<t.length;a++)if(r[0]===t[a][0]&&r[1]===t[a][1])return a;return-1},it=function(){if(Cr){L=[];return}if(ir.length!==0){var r=ir[0][0]<=0,t=[];r?L.map(function(a){gr([-a[0],-a[1]],ir)===-1&&t.push(a)}):L.map(function(a){gr(a,ir)>-1&&t.push(a)}),L=t}},mr=function(r){r||it(),e.$("td."+g).removeClass(g),L.length!==0&&(T?e.cells({page:"current"}).every(function(){var t=Dr(this);gr([t.row,t.col],L)>-1&&$(this.node()).addClass(g)}):L.map(function(t){$(e.cell(t[0]-1,t[1]).node()).addClass(g)}))};e.on("click.dt","tbody td",function(){var r=$(this),t=Dr(e.cell(this));r.hasClass(g)?(r.removeClass(g),L.splice(gr([t.row,t.col],L),1)):(Q==="single"&&$(e.cells().nodes()).removeClass(g),r.addClass(g),L=Q==="single"?[[t.row,t.col]]:fr(L.concat([[t.row,t.col]]))),mr(!1),b("cells_selected",Z(L),"shiny.matrix")}),mr(!1),b("cells_selected",Z(L),"shiny.matrix"),T&&e.on("draw.dt",function(r){mr(!1)}),D.selectCells=function(r,t){L=r||[],mr(t),b("cells_selected",Z(L),"shiny.matrix")}}}var Rr=function(r,t){var a=function(i,s){var o;if(T)o=s.page==="current"?R:kr;else{var M=e.rows($.extend({search:"applied",page:"all"},s));o=zr(M.indexes().toArray())}b("rows_"+i,o)};a("current",{page:"current"}),a("all",{})};e.on("draw.dt",Rr),Rr(),e.on("draw.dt column-visibility.dt",function(){b("state",e.state())}),b("state",e.state());var jr=function(){b("search",e.search()),_&&b("search_columns",_.toArray().map(function(r){return $(r).find("input").first().val()}))};e.on("draw.dt",jr),jr();var Or=function(r){var t=Dr(e.cell(r));return t.value=e.cell(r).data(),t};e.on("click.dt","tbody td",function(){b("cell_clicked",Or(this),null,null,{priority:"event"})}),b("cell_clicked",{}),e.on("mousedown.dt","tbody td a",function(r){this.className===""&&r.stopPropagation()}),D.addRow=function(r,t,a){var i=e.columns().indexes().length,s=i-r.length;if(s===1)r=t.concat(r);else if(s!==0)throw console.log(r),console.log(e.columns().indexes()),"New data must be of the same length as current data ("+i+")";e.row.add(r).draw(a)},D.updateSearch=function(r){r.global!==null&&$(e.table().container()).find("input[type=search]").first().val(r.global).trigger("input");var t=r.columns;!_||t===null||(_.toArray().map(function(a,i){var s=typeof t=="string"?t:t[i];if(typeof s>"u"){console.log("The search keyword for column "+i+" is undefined");return}$(a).find("input").first().val(s).trigger("input",[!0]).trigger("change")}),e.draw())},D.hideCols=function(r,t){t&&e.columns().visible(!0,!1),e.columns(r).visible(!1)},D.showCols=function(r,t){t&&e.columns().visible(!1,!1),e.columns(r).visible(!0)},D.colReorder=function(r,t){e.colReorder.order(r,t)},D.selectPage=function(r){if(e.page.info().pages<r||r<1)throw"Selected page is out of range";e.page(r-1).draw(!1)},D.reloadData=function(r,t){D.selectRows&&S("row",t)&&D.selectRows([]),D.selectColumns&&S("column",t)&&D.selectColumns([]),D.selectCells&&S("cell",t)&&D.selectCells([]),e.ajax.reload(null,r)},D.updateFilters=function(r){_.each(function(t,a){var i=t;if(_.length>r.length){if(t===0)return;i=t-1}r[i]&&Xr(a,r[i])})},e.shinyMethods=D}},resize:function(c,n,l,u){u.data&&this.renderValue(c,u.data,u),u.fillContainer&&this.fillAvailableHeight(c,l),this.adjustWidth(c)},fillAvailableHeight:function(c,n){var l=$(c).find("div.dataTables_wrapper"),u=$(c).find($("div.dataTables_scrollBody")),y=l.innerHeight()-u.innerHeight(),d=n-y;u.css("max-height","none"),u.height(d+"px")},adjustWidth:function(c){var n=$(c),l=n.data("datatable");l&&l.columns.adjust(),n.find(".dataTables_scrollHeadInner").css("width","").children("table").css("margin-left","")}}),HTMLWidgets.shinyMode&&Shiny.addCustomMessageHandler("datatable-calls",function(c){var n=c.id,l=document.getElementById(n),u=l?$(l).data("datatable"):null;if(!u){console.log("Couldn't find table with id "+n);return}var y=u.shinyMethods,d=c.call;y[d.method]?y[d.method].apply(u,d.args):console.log("Unknown method "+d.method)})})();
