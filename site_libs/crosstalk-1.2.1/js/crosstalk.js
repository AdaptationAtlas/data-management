(function(){function d(b,v,h){function m(c,o){if(!v[c]){if(!b[c]){var l=typeof require=="function"&&require;if(!o&&l)return l(c,!0);if(w)return w(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var n=v[c]={exports:{}};b[c][0].call(n.exports,function(i){var t=b[c][1][i];return m(t||i)},n,n.exports,d,b,v,h)}return v[c].exports}for(var w=typeof require=="function"&&require,g=0;g<h.length;g++)m(h[g]);return m}return d})()({1:[function(d,b,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var h=function(){function g(c,o){for(var l=0;l<o.length;l++){var a=o[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,o,l){return o&&g(c.prototype,o),l&&g(c,l),c}}();function m(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}var w=function(){function g(){m(this,g),this._types={},this._seq=0}return h(g,[{key:"on",value:function(o,l){var a=this._types[o];a||(a=this._types[o]={});var n="sub"+this._seq++;return a[n]=l,n}},{key:"off",value:function(o,l){var a=this._types[o];if(typeof l=="function"){for(var n in a)if(a.hasOwnProperty(n)&&a[n]===l)return delete a[n],n;return!1}else{if(typeof l=="string")return a&&a[l]?(delete a[l],l):!1;throw new Error("Unexpected type for listener")}}},{key:"trigger",value:function(o,l,a){var n=this._types[o];for(var i in n)n.hasOwnProperty(i)&&n[i].call(a,l)}}]),g}();v.default=w},{}],2:[function(d,b,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.FilterHandle=void 0;var h=function(){function _(y,s){for(var S=0;S<s.length;S++){var k=s[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}return function(y,s,S){return s&&_(y.prototype,s),S&&_(y,S),y}}(),m=d("./events"),w=t(m),g=d("./filterset"),c=t(g),o=d("./group"),l=t(o),a=d("./util"),n=i(a);function i(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var s in _)Object.prototype.hasOwnProperty.call(_,s)&&(y[s]=_[s]);return y.default=_,y}function t(_){return _&&_.__esModule?_:{default:_}}function e(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function r(_){var y=_.var("filterset"),s=y.get();return s||(s=new c.default,y.set(s)),s}var u=1;function f(){return u++}var p=v.FilterHandle=function(){function _(y,s){e(this,_),this._eventRelay=new w.default,this._emitter=new n.SubscriptionTracker(this._eventRelay),this._group=null,this._filterSet=null,this._filterVar=null,this._varOnChangeSub=null,this._extraInfo=n.extend({sender:this},s),this._id="filter"+f(),this.setGroup(y)}return h(_,[{key:"setGroup",value:function(s){var S=this;if(this._group!==s&&!(!this._group&&!s)&&(this._filterVar&&(this._filterVar.off("change",this._varOnChangeSub),this.clear(),this._varOnChangeSub=null,this._filterVar=null,this._filterSet=null),this._group=s,s)){s=(0,l.default)(s),this._filterSet=r(s),this._filterVar=(0,l.default)(s).var("filter");var k=this._filterVar.on("change",function(M){S._eventRelay.trigger("change",M,S)});this._varOnChangeSub=k}}},{key:"_mergeExtraInfo",value:function(s){return n.extend({},this._extraInfo?this._extraInfo:null,s||null)}},{key:"close",value:function(){this._emitter.removeAllListeners(),this.clear(),this.setGroup(null)}},{key:"clear",value:function(s){this._filterSet&&(this._filterSet.clear(this._id),this._onChange(s))}},{key:"set",value:function(s,S){this._filterSet&&(this._filterSet.update(this._id,s),this._onChange(S))}},{key:"on",value:function(s,S){return this._emitter.on(s,S)}},{key:"off",value:function(s,S){return this._emitter.off(s,S)}},{key:"_onChange",value:function(s){this._filterSet&&this._filterVar.set(this._filterSet.value,this._mergeExtraInfo(s))}},{key:"filteredKeys",get:function(){return this._filterSet?this._filterSet.value:null}}]),_}()},{"./events":1,"./filterset":3,"./group":4,"./util":11}],3:[function(d,b,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var h=function(){function o(l,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}return function(l,a,n){return a&&o(l.prototype,a),n&&o(l,n),l}}(),m=d("./util");function w(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function g(o,l){if(o===l)return 0;if(o<l)return-1;if(o>l)return 1}var c=function(){function o(){w(this,o),this.reset()}return h(o,[{key:"reset",value:function(){this._handles={},this._keys={},this._value=null,this._activeHandles=0}},{key:"update",value:function(a,n){n!==null&&(n=n.slice(0),n.sort(g));var i=(0,m.diffSortedLists)(this._handles[a],n),t=i.added,e=i.removed;this._handles[a]=n;for(var r=0;r<t.length;r++)this._keys[t[r]]=(this._keys[t[r]]||0)+1;for(var u=0;u<e.length;u++)this._keys[e[u]]--;this._updateValue(n)}},{key:"_updateValue",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._allKeys,n=Object.keys(this._handles).length;if(n===0)this._value=null;else{this._value=[];for(var i=0;i<a.length;i++){var t=this._keys[a[i]];t===n&&this._value.push(a[i])}}}},{key:"clear",value:function(a){if(!(typeof this._handles[a]>"u")){var n=this._handles[a];n||(n=[]);for(var i=0;i<n.length;i++)this._keys[n[i]]--;delete this._handles[a],this._updateValue()}}},{key:"value",get:function(){return this._value}},{key:"_allKeys",get:function(){var a=Object.keys(this._keys);return a.sort(g),a}}]),o}();v.default=c},{"./util":11}],4:[function(d,b,v){(function(h){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var m=function(){function t(e,r){for(var u=0;u<r.length;u++){var f=r[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(e,f.key,f)}}return function(e,r,u){return r&&t(e.prototype,r),u&&t(e,u),e}}(),w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};v.default=n;var g=d("./var"),c=o(g);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}h.__crosstalk_groups=h.__crosstalk_groups||{};var a=h.__crosstalk_groups;function n(t){if(t&&typeof t=="string")return a.hasOwnProperty(t)||(a[t]=new i(t)),a[t];if((typeof t>"u"?"undefined":w(t))==="object"&&t._vars&&t.var)return t;if(Array.isArray(t)&&t.length==1&&typeof t[0]=="string")return n(t[0]);throw new Error("Invalid groupName argument")}var i=function(){function t(e){l(this,t),this.name=e,this._vars={}}return m(t,[{key:"var",value:function(r){if(!r||typeof r!="string")throw new Error("Invalid var name");return this._vars.hasOwnProperty(r)||(this._vars[r]=new c.default(this,r)),this._vars[r]}},{key:"has",value:function(r){if(!r||typeof r!="string")throw new Error("Invalid var name");return this._vars.hasOwnProperty(r)}}]),t}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./var":12}],5:[function(d,b,v){(function(h){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var m=d("./group"),w=l(m),g=d("./selection"),c=d("./filter"),o=d("./input");d("./input_selectize"),d("./input_checkboxgroup"),d("./input_slider");function l(e){return e&&e.__esModule?e:{default:e}}var a=(0,w.default)("default");function n(e){return a.var(e)}function i(e){return a.has(e)}h.Shiny&&h.Shiny.addCustomMessageHandler("update-client-value",function(e){typeof e.group=="string"?(0,w.default)(e.group).var(e.name).set(e.value):n(e.name).set(e.value)});var t={group:w.default,var:n,has:i,SelectionHandle:g.SelectionHandle,FilterHandle:c.FilterHandle,bind:o.bind};v.default=t,h.crosstalk=t}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./filter":2,"./group":4,"./input":6,"./input_checkboxgroup":7,"./input_selectize":8,"./input_slider":9,"./selection":10}],6:[function(d,b,v){(function(h){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.register=g,v.bind=c;var m=h.jQuery,w={};function g(t){w[t.className]=t,h.document&&h.document.readyState!=="complete"?m(function(){c()}):h.document&&setTimeout(c,100)}function c(){Object.keys(w).forEach(function(t){var e=w[t];m("."+e.className).not(".crosstalk-input-bound").each(function(r,u){a(e,u)})})}function o(t){return t.replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")}function l(t){var e=m(t);Object.keys(w).forEach(function(r){if(e.hasClass(r)&&!e.hasClass("crosstalk-input-bound")){var u=w[r];a(u,t)}})}function a(t,e){var r=m(e).find("script[type='application/json'][data-for='"+o(e.id)+"']"),u=JSON.parse(r[0].innerText),f=t.factory(e,u);m(e).data("crosstalk-instance",f),m(e).addClass("crosstalk-input-bound")}if(h.Shiny){var n=new h.Shiny.InputBinding,i=h.jQuery;i.extend(n,{find:function(e){return i(e).find(".crosstalk-input")},initialize:function(e){i(e).hasClass("crosstalk-input-bound")||l(e)},getId:function(e){return e.id},getValue:function(e){},setValue:function(e,r){},receiveMessage:function(e,r){},subscribe:function(e,r){i(e).data("crosstalk-instance").resume()},unsubscribe:function(e){i(e).data("crosstalk-instance").suspend()}}),h.Shiny.inputBindings.register(n,"crosstalk.inputBinding")}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],7:[function(d,b,v){(function(h){"use strict";var m=d("./input"),w=c(m),g=d("./filter");function c(l){if(l&&l.__esModule)return l;var a={};if(l!=null)for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(a[n]=l[n]);return a.default=l,a}var o=h.jQuery;w.register({className:"crosstalk-input-checkboxgroup",factory:function(a,n){var i=new g.FilterHandle(n.group),t=void 0,e=o(a);return e.on("change","input[type='checkbox']",function(){var r=e.find("input[type='checkbox']:checked");if(r.length===0)t=null,i.clear();else{var u={};r.each(function(){n.map[this.value].forEach(function(p){u[p]=!0})});var f=Object.keys(u);f.sort(),t=f,i.set(f)}}),{suspend:function(){i.clear()},resume:function(){t&&i.set(t)}}}})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./filter":2,"./input":6}],8:[function(d,b,v){(function(h){"use strict";var m=d("./input"),w=l(m),g=d("./util"),c=l(g),o=d("./filter");function l(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t]);return i.default=n,i}var a=h.jQuery;w.register({className:"crosstalk-input-select",factory:function(i,t){var e=[{value:"",label:"(All)"}],r=c.dataframeToD3(t.items),u={options:e.concat(r),valueField:"value",labelField:"label",searchField:"label"},f=a(i).find("select")[0],p=a(f).selectize(u)[0].selectize,_=new o.FilterHandle(t.group),y=void 0;return p.on("change",function(){if(p.items.length===0)y=null,_.clear();else{var s={};p.items.forEach(function(k){t.map[k].forEach(function(M){s[M]=!0})});var S=Object.keys(s);S.sort(),y=S,_.set(S)}}),{suspend:function(){_.clear()},resume:function(){y&&_.set(y)}}}})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./filter":2,"./input":6,"./util":11}],9:[function(d,b,v){(function(h){"use strict";var m=function(){function t(e,r){var u=[],f=!0,p=!1,_=void 0;try{for(var y=e[Symbol.iterator](),s;!(f=(s=y.next()).done)&&(u.push(s.value),!(r&&u.length===r));f=!0);}catch(S){p=!0,_=S}finally{try{!f&&y.return&&y.return()}finally{if(p)throw _}}return u}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=d("./input"),g=o(w),c=d("./filter");function o(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var l=h.jQuery,a=h.strftime;g.register({className:"crosstalk-input-slider",factory:function(e,r){var u=new c.FilterHandle(r.group),f={},p=l(e).find("input"),_=p.data("data-type"),y=p.data("time-format"),s=p.data("round"),S=void 0;if(_==="date")S=a.utc(),f.prettify=function(O){return S(y,new Date(O))};else if(_==="datetime"){var k=p.data("timezone");k?S=a.timezone(k):S=a,f.prettify=function(O){return S(y,new Date(O))}}else _==="number"&&typeof s<"u"&&(f.prettify=function(O){var C=Math.pow(10,s);return Math.round(O*C)/C});p.ionRangeSlider(f);function M(){var O=p.data("ionRangeSlider").result,C=void 0,T=p.data("data-type");return T==="date"?C=function(E){return i(new Date(+E))}:T==="datetime"?C=function(E){return+E/1e3}:C=function(E){return+E},p.data("ionRangeSlider").options.type==="double"?[C(O.from),C(O.to)]:C(O.from)}var H=null;return p.on("change.crosstalkSliderInput",function(O){if(!p.data("updating")&&!p.data("animating")){for(var C=M(),T=m(C,2),I=T[0],E=T[1],P=[],V=0;V<r.values.length;V++){var x=r.values[V];x>=I&&x<=E&&P.push(r.keys[V])}P.sort(),u.set(P),H=P}}),{suspend:function(){u.clear()},resume:function(){H&&u.set(H)}}}});function n(t,e){for(var r=t.toString();r.length<e;)r="0"+r;return r}function i(t){return t instanceof Date?t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1,2)+"-"+n(t.getUTCDate(),2):null}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./filter":2,"./input":6}],10:[function(d,b,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.SelectionHandle=void 0;var h=function(){function e(r,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(r,p.key,p)}}return function(r,u,f){return u&&e(r.prototype,u),f&&e(r,f),r}}(),m=d("./events"),w=n(m),g=d("./group"),c=n(g),o=d("./util"),l=a(o);function a(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u]);return r.default=e,r}function n(e){return e&&e.__esModule?e:{default:e}}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var t=v.SelectionHandle=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;i(this,e),this._eventRelay=new w.default,this._emitter=new l.SubscriptionTracker(this._eventRelay),this._group=null,this._var=null,this._varOnChangeSub=null,this._extraInfo=l.extend({sender:this},u),this.setGroup(r)}return h(e,[{key:"setGroup",value:function(u){var f=this;if(this._group!==u&&!(!this._group&&!u)&&(this._var&&(this._var.off("change",this._varOnChangeSub),this._var=null,this._varOnChangeSub=null),this._group=u,u)){this._var=(0,c.default)(u).var("selection");var p=this._var.on("change",function(_){f._eventRelay.trigger("change",_,f)});this._varOnChangeSub=p}}},{key:"_mergeExtraInfo",value:function(u){return l.extend({},this._extraInfo?this._extraInfo:null,u||null)}},{key:"set",value:function(u,f){this._var&&this._var.set(u,this._mergeExtraInfo(f))}},{key:"clear",value:function(u){this._var&&this.set(void 0,this._mergeExtraInfo(u))}},{key:"on",value:function(u,f){return this._emitter.on(u,f)}},{key:"off",value:function(u,f){return this._emitter.off(u,f)}},{key:"close",value:function(){this._emitter.removeAllListeners(),this.setGroup(null)}},{key:"value",get:function(){return this._var?this._var.get():null}}]),e}()},{"./events":1,"./group":4,"./util":11}],11:[function(d,b,v){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var h=function(){function n(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};v.extend=g,v.checkSorted=c,v.diffSortedLists=o,v.dataframeToD3=l;function w(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function g(n){for(var i=arguments.length,t=Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];for(var r=0;r<t.length;r++){var u=t[r];if(!(typeof u>"u"||u===null))for(var f in u)u.hasOwnProperty(f)&&(n[f]=u[f])}return n}function c(n){for(var i=1;i<n.length;i++)if(n[i]<=n[i-1])throw new Error("List is not sorted or contains duplicate")}function o(n,i){var t=0,e=0;n||(n=[]),i||(i=[]);var r=[],u=[];for(c(n),c(i);t<n.length&&e<i.length;)n[t]===i[e]?(t++,e++):n[t]<i[e]?r.push(n[t++]):u.push(i[e++]);return t<n.length&&(r=r.concat(n.slice(t))),e<i.length&&(u=u.concat(i.slice(e))),{removed:r,added:u}}function l(n){var i=[],t=void 0;for(var e in n){if(n.hasOwnProperty(e)&&i.push(e),m(n[e])!=="object"||typeof n[e].length>"u")throw new Error("All fields must be arrays");if(typeof t<"u"&&t!==n[e].length)throw new Error("All fields must be arrays of the same length");t=n[e].length}for(var r=[],u=void 0,f=0;f<t;f++){u={};for(var p=0;p<i.length;p++)u[i[p]]=n[i[p]][f];r.push(u)}return r}var a=v.SubscriptionTracker=function(){function n(i){w(this,n),this._emitter=i,this._subs={}}return h(n,[{key:"on",value:function(t,e){var r=this._emitter.on(t,e);return this._subs[r]=t,r}},{key:"off",value:function(t,e){var r=this._emitter.off(t,e);return r&&delete this._subs[r],r}},{key:"removeAllListeners",value:function(){var t=this,e=this._subs;this._subs={},Object.keys(e).forEach(function(r){t._emitter.off(e[r],r)})}}]),n}()},{}],12:[function(d,b,v){(function(h){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},w=function(){function n(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),g=d("./events"),c=o(g);function o(n){return n&&n.__esModule?n:{default:n}}function l(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(i,t,e){l(this,n),this._group=i,this._name=t,this._value=e,this._events=new c.default}return w(n,[{key:"get",value:function(){return this._value}},{key:"set",value:function(t,e){if(this._value!==t){var r=this._value;this._value=t;var u={};if(e&&(typeof e>"u"?"undefined":m(e))==="object")for(var f in e)e.hasOwnProperty(f)&&(u[f]=e[f]);u.oldValue=r,u.value=t,this._events.trigger("change",u,this),h.Shiny&&h.Shiny.onInputChange&&h.Shiny.onInputChange(".clientValue-"+(this._group.name!==null?this._group.name+"-":"")+this._name,typeof t>"u"?null:t)}}},{key:"on",value:function(t,e){return this._events.on(t,e)}},{key:"off",value:function(t,e){return this._events.off(t,e)}}]),n}();v.default=a}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./events":1}]},{},[5]);
